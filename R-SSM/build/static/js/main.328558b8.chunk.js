(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{126:function(e,t,i){},127:function(e,t,i){},128:function(e,t,i){"use strict";i.r(t);var n=i(0),s=i(35),c=i.n(s),a=(i(80),i(27)),r=i.n(a),o=i(28),u=i(43),O=i(20),b=i(132),d=i(138),l=i(133),j=i(137),S=i(134),T=i(136),_=i(135),p=i(57),E=i(55),h=i(58),x=i(60),m=i(59),v=i(56),C=i(33),N=i(15);var D=function(){var e=Object(n.useState)(""),t=Object(O.a)(e,2),i=t[0],s=t[1],c=Object(n.useState)(""),a=Object(O.a)(c,2),D=a[0],A=a[1],f=Object(n.useState)(""),P=Object(O.a)(f,2),R=P[0],g=P[1],I=Object(n.useState)(""),k=Object(O.a)(I,2),U=k[0],w=k[1],L=Object(n.useState)({}),B=Object(O.a)(L,2),y=B[0],K=B[1],W=Object(n.useState)({}),M=Object(O.a)(W,2),H=M[0],F=M[1],V=Object(n.useState)(!1),z=Object(O.a)(V,2),Z=z[0],G=z[1],Y=Object(n.useState)(!1),q=Object(O.a)(Y,2),J=q[0],Q=q[1],X=Object(n.useState)(!1),$=Object(O.a)(X,2),ee=$[0],te=$[1],ie=Object(n.useState)(!1),ne=Object(O.a)(ie,2),se=ne[0],ce=ne[1],ae=Object(n.useState)(!1),re=Object(O.a)(ae,2),oe=re[0],ue=re[1],Oe=Object(n.useState)(!1),be=Object(O.a)(Oe,2),de=be[0],le=be[1],je=Object(n.useState)(!1),Se=Object(O.a)(je,2),Te=Se[0],_e=Se[1],pe=Object(n.useState)(!1),Ee=Object(O.a)(pe,2),he=Ee[0],xe=Ee[1],me=Object(n.useState)(!1),ve=Object(O.a)(me,2),Ce=ve[0],Ne=ve[1],De=Object(n.useState)("A valid name is required"),Ae=Object(O.a)(De,2),fe=Ae[0],Pe=Ae[1],Re=Object(n.useState)(!1),ge=Object(O.a)(Re,2),Ie=ge[0],ke=ge[1],Ue=Object(n.useState)("A valid name is required"),we=Object(O.a)(Ue,2),Le=we[0],Be=we[1],ye=Object(n.useState)(!1),Ke=Object(O.a)(ye,2),We=Ke[0],Me=Ke[1],He=Object(n.useState)("A valid email is required"),Fe=Object(O.a)(He,2),Ve=Fe[0],ze=Fe[1],Ze=Object(n.useState)(!1),Ge=Object(O.a)(Ze,2),Ye=Ge[0],qe=Ge[1];return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(b.a,{onSubmit:function(e){e.preventDefault(),G(!0),function(){var e=Object(u.a)(r.a.mark((function e(){var t,i,n,s,c,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"dev"!==Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_mode){e.next=22;break}return console.log("Mode is : DEV"),"Bearer AAIkZTQ0MzY1NmEtNDNlZC00MzllLTkyODgtMTNjM2UwZDg2OTBl4wOvjlu5xms5b1i2TsOgJen78DwFGrkfDYhiwGwmNuxu9eSYneVSB5Z5PsJUGBOfRquAI8V6C8qPL6x1jp1Pd8MgU0CE39l0hW5nsWHNR4AemUZwVzh39tKkEDNQYK2u",t={"X-IBM-Client-Id":Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_CLIENT_ID,"X-IBM-Client-Secret":Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_CLIENT_SECRET,Authorization:"Bearer AAIkZTQ0MzY1NmEtNDNlZC00MzllLTkyODgtMTNjM2UwZDg2OTBl4wOvjlu5xms5b1i2TsOgJen78DwFGrkfDYhiwGwmNuxu9eSYneVSB5Z5PsJUGBOfRquAI8V6C8qPL6x1jp1Pd8MgU0CE39l0hW5nsWHNR4AemUZwVzh39tKkEDNQYK2u",accept:"application/json"},e.next=7,fetch("https://api.ibm.com/scx/sbs_orgaccess/customer?emailAddress=".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_USERNAME,"&_namedQuery=getCustomersByContactEmail"),{headers:t});case 7:return i=e.sent,e.next=10,i.json();case 10:return n=e.sent,s=JSON.parse(n.List[0].Id),e.next=14,fetch("https://api.ibm.com/scx/run/sbs_orgaccess/subscription?_namedQuery=getSubscriptionByCustomer&customerId=".concat(s),{headers:t});case 14:return i=e.sent,e.next=17,i.json();case 17:n=e.sent,K(Object(o.a)({},n)),G(!1),e.next=30;break;case 22:return e.next=24,fetch("/getmysubscriptions");case 24:return c=e.sent,e.next=27,c.json();case 27:a=e.sent,K(Object(o.a)({},a)),G(!1);case 30:e.next=36;break;case 32:e.prev=32,e.t0=e.catch(0),_e(!0),G(!1);case 36:case"end":return e.stop()}}),e,null,[[0,32]])})));return function(){return e.apply(this,arguments)}}()()},children:Object(N.jsx)("div",{className:"ButtonArea",children:Object(N.jsx)(d.a,{type:"submit",children:" Get My Subscriptions "})})}),Object(N.jsx)(l.a,{active:Z,description:"Active loading indicator",withOverlay:!0}),ee&&Object(N.jsx)(j.a,{iconDescription:"Close notification",subtitle:Object(N.jsx)("span",{children:"Invited user to Subscription"}),timeout:9e3,onClose:function(){te(!1)},kind:"success",title:"Success Notification"}),se&&Object(N.jsx)(j.a,{iconDescription:"Close notification",subtitle:Object(N.jsx)("span",{children:"Revoked Subscriber"}),timeout:9e3,onClose:function(){ce(!1)},kind:"success",title:"Success Notification"}),oe&&Object(N.jsx)(j.a,{iconDescription:"Close notification",subtitle:Object(N.jsx)("span",{children:"User exists in same organization and entitled with specified subscription"}),timeout:5e3,onClose:function(){ue(!1)},kind:"success",title:"Success Notification"}),de&&Object(N.jsx)(j.a,{iconDescription:"Close notification",subtitle:Object(N.jsx)("span",{children:"Operation cannot be done"}),timeout:3e3,onClose:function(){le(!1)},title:"Error Notification"}),Te&&Object(N.jsx)(j.a,{iconDescription:"Close notification",subtitle:Object(N.jsx)("span",{children:"Server cannot be reached"}),timeout:3e3,onClose:function(){_e(!1)},title:"Error Notification"}),he&&Object(N.jsx)(j.a,{iconDescription:"Close notification",subtitle:Object(N.jsx)("span",{children:"Fields cannot be empty"}),timeout:3e3,onClose:function(){xe(!1)},title:"Error Notification"}),y.List&&Object(N.jsx)("div",{className:"TableDisplay",children:y.List&&Object(N.jsx)(_.a,{rows:y.List,headers:[{key:"partnumber",header:"Part Number"},{key:"name",header:"Name"},{key:"numofseats",header:"Number of Available Seats"},{key:"subscrpstate",header:"Subscription State"},{key:"action1",header:"Action"},{key:"action2",header:""}],children:function(e){e.rows;var t=e.headers,i=e.getHeaderProps;return Object(N.jsx)(p.a,{title:"Subscription Results",children:Object(N.jsxs)(E.a,{children:[Object(N.jsx)(h.a,{children:Object(N.jsx)(x.a,{children:t.map((function(e){return Object(N.jsx)(m.a,Object(o.a)(Object(o.a)({},i({header:e})),{},{children:e.header}))}))})}),Object(N.jsx)(v.a,{children:y.List&&y.List.map((function(e,t){return Object(N.jsxs)(x.a,{children:[Object(N.jsx)(C.a,{children:e.PartNumber}),Object(N.jsx)(C.a,{children:e.Name}),Object(N.jsx)(C.a,{children:e.NumberOfAvailableSeats}),Object(N.jsx)(C.a,{children:e.SubscriptionState}),Object(N.jsx)(C.a,{children:Object(N.jsx)(S.a,{onClick:function(){return t=e.Id,G(!0),void function(){var e=Object(u.a)(r.a.mark((function e(){var i,n,s,c,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"dev"!==Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_mode){e.next=15;break}return console.log("Mode is : DEV"),i={"X-IBM-Client-Id":Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_CLIENT_ID,"X-IBM-Client-Secret":Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_CLIENT_SECRET,Authorization:"Bearer AAIkZTQ0MzY1NmEtNDNlZC00MzllLTkyODgtMTNjM2UwZDg2OTBl4wOvjlu5xms5b1i2TsOgJen78DwFGrkfDYhiwGwmNuxu9eSYneVSB5Z5PsJUGBOfRquAI8V6C8qPL6x1jp1Pd8MgU0CE39l0hW5nsWHNR4AemUZwVzh39tKkEDNQYK2u",accept:"application/json"},e.next=7,fetch("https://api.ibm.com/scx/run/sbs_orgaccess/subscriber?subscriptionId=".concat(t,"&_namedQuery=getSubscriberListBySubscription"),{headers:i});case 7:return n=e.sent,e.next=10,n.json();case 10:s=e.sent,F(Object(o.a)({},s)),G(!1),e.next=23;break;case 15:return e.next=17,fetch("/getSubscribers?id="+t);case 17:return c=e.sent,e.next=20,c.json();case 20:a=e.sent,F(Object(o.a)({},a)),G(!1);case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(0),_e(!0),G(!1);case 29:case"end":return e.stop()}}),e,null,[[0,25]])})));return function(){return e.apply(this,arguments)}}()();var t},children:"Get Subscribers"})}),Object(N.jsx)(C.a,{children:Object(N.jsx)(S.a,{onClick:function(){return t=e.Id,Q(!0),void w(t);var t},children:"Invite to Subscription"})})]},t)}))})]})})}})}),H.List&&Object(N.jsx)("div",{className:"TableDisplay",children:H.List&&Object(N.jsx)(_.a,{rows:H.List,headers:[{key:"subid",header:"Subscriber ID"},{key:"orgname",header:"Org Name"},{key:"givenname",header:"Given Name"},{key:"substate",header:"Subscriber State"},{key:"revokeaction",header:"Action"}],children:function(e){e.rows;var t=e.headers,i=e.getHeaderProps;return Object(N.jsx)(p.a,{title:"Subscriber Results",children:Object(N.jsxs)(E.a,{children:[Object(N.jsx)(h.a,{children:Object(N.jsx)(x.a,{children:t.map((function(e){return Object(N.jsx)(m.a,Object(o.a)(Object(o.a)({},i({header:e})),{},{children:e.header}))}))})}),Object(N.jsx)(v.a,{children:H.List&&H.List.map((function(e,t){return Object(N.jsxs)(x.a,{children:[Object(N.jsx)(C.a,{children:e.SeatSet[0].SubscriberId}),Object(N.jsx)(C.a,{children:e.Person.OrgName}),Object(N.jsx)(C.a,{children:e.Person.GivenName}),Object(N.jsx)(C.a,{children:e.SubscriberState}),Object(N.jsx)(C.a,{children:Object(N.jsx)(S.a,{onClick:function(){return t=e.SeatSet[0].SubscriberId,i=e.SeatSet[0].Id,G(!0),void function(){var e=Object(u.a)(r.a.mark((function e(){var n,s,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"dev"!==Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_mode){e.next=14;break}return console.log("Mode is : DEV"),n={"X-IBM-Client-Id":Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_CLIENT_ID,"X-IBM-Client-Secret":Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_CLIENT_SECRET,Authorization:"Bearer AAIkZTQ0MzY1NmEtNDNlZC00MzllLTkyODgtMTNjM2UwZDg2OTBl4wOvjlu5xms5b1i2TsOgJen78DwFGrkfDYhiwGwmNuxu9eSYneVSB5Z5PsJUGBOfRquAI8V6C8qPL6x1jp1Pd8MgU0CE39l0hW5nsWHNR4AemUZwVzh39tKkEDNQYK2u",accept:"application/json"},e.next=7,fetch("https://api.ibm.com/scx/run/sbs_orgaccess/subscriber/".concat(t,"/seat/").concat(i),{headers:n,method:"POST"});case 7:return s=e.sent,e.next=10,s;case 10:204===e.sent.status?(ce(!0),setTimeout((function(){F({})}),1e3),G(!1)):(le(!0),G(!1)),e.next=21;break;case 14:return e.next=16,fetch("/revokesubscription?subid="+t+"&seatid="+i);case 16:return c=e.sent,e.next=19,c.json();case 19:"success"===e.sent.result?(ce(!0),setTimeout((function(){F({})}),1e3),G(!1)):(le(!0),G(!1));case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(0),_e(!0),G(!1);case 27:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(){return e.apply(this,arguments)}}()();var t,i},children:"Revoke"})})]},t)}))})]})})}})}),J&&Object(N.jsxs)(b.a,{onSubmit:function(e){(e.preventDefault(),G(!0),i&&D&&R)?(function(){var e=Object(u.a)(r.a.mark((function e(){var t,n,s,c,a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"dev"!==Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_mode){e.next=15;break}return console.log("Mode is : DEV"),"Bearer AAIkZTQ0MzY1NmEtNDNlZC00MzllLTkyODgtMTNjM2UwZDg2OTBl4wOvjlu5xms5b1i2TsOgJen78DwFGrkfDYhiwGwmNuxu9eSYneVSB5Z5PsJUGBOfRquAI8V6C8qPL6x1jp1Pd8MgU0CE39l0hW5nsWHNR4AemUZwVzh39tKkEDNQYK2u",t={"X-IBM-Client-Id":Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_CLIENT_ID,"X-IBM-Client-Secret":Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_CLIENT_SECRET,Authorization:"Bearer AAIkZTQ0MzY1NmEtNDNlZC00MzllLTkyODgtMTNjM2UwZDg2OTBl4wOvjlu5xms5b1i2TsOgJen78DwFGrkfDYhiwGwmNuxu9eSYneVSB5Z5PsJUGBOfRquAI8V6C8qPL6x1jp1Pd8MgU0CE39l0hW5nsWHNR4AemUZwVzh39tKkEDNQYK2u",accept:"application/json","content-type":"application/json"},n={Subscriber:{Person:{GivenName:i,EmailAddress:R,FamilyName:D,RoleSet:["CustomerAdministrator","AppDeveloper"]}}},e.next=8,fetch("https://api.ibm.com/scx/run/sbs_orgaccess/subscriber/inviteUser?subscriptionId=".concat(U),{method:"POST",body:JSON.stringify(n),headers:t});case 8:return s=e.sent,e.next=11,s.json();case 11:"User created and entitled in inviter's organization."===(c=e.sent).InviteUser.SuccessMessage?(te(!0),Q(!1),setTimeout((function(){F({})}),1e3),G(!1)):"User exists in same organization and entitled with specified subscription."===c.InviteUser.SuccessMessage?(ue(!0),Q(!1),setTimeout((function(){F({})}),1e3),G(!1)):(le(!0),G(!1)),e.next=23;break;case 15:return e.next=17,fetch("/inviteuser?givenname="+i+"&useremail="+R+"&familyname="+D+"&subspid="+U);case 17:return a=e.sent,e.next=20,a.json();case 20:o=e.sent,console.log("Invite res: ",o),"User created and entitled in inviter's organization."===o.InviteUser.SuccessMessage?(te(!0),Q(!1),setTimeout((function(){F({})}),1e3),G(!1)):"User exists in same organization and entitled with specified subscription."===o.InviteUser.SuccessMessage?(ue(!0),Q(!1),setTimeout((function(){F({})}),1e3),G(!1)):(le(!0),G(!1));case 23:e.next=30;break;case 25:e.prev=25,e.t0=e.catch(0),console.log(e.t0),_e(!0),G(!1);case 30:case"end":return e.stop()}}),e,null,[[0,25]])})));return function(){return e.apply(this,arguments)}}()(),s(""),A(""),g("")):(xe(!0),G(!1))},children:[Object(N.jsxs)("div",{className:"TextArea",children:[Object(N.jsx)(T.a,{type:"text",id:"gname",invalid:Ce,invalidText:fe,labelText:"Given Name*",placeholder:"Given Name",size:"lg",value:i,onChange:function(e){e.target.value.match(/^[a-zA-Z]+$/)?(Ne(!1),qe(!1)):(Ne(!0),Pe("Only letters allowed. No special characters or numbers"),qe(!0)),s(e.target.value)}})," ",Object(N.jsx)("br",{})]}),Object(N.jsxs)("div",{className:"TextArea",children:[Object(N.jsx)(T.a,{type:"text",id:"fname",invalid:Ie,invalidText:Le,labelText:"Family Name*",placeholder:"Family Name",size:"lg",value:D,onChange:function(e){e.target.value.match(/^[a-zA-Z]+$/)?(ke(!1),qe(!1)):(ke(!0),Be("Only letters allowed. No special characters or numbers"),qe(!0)),A(e.target.value)}})," ",Object(N.jsx)("br",{})]}),Object(N.jsx)("div",{className:"TextArea",children:Object(N.jsx)(T.a,{type:"text",id:"email",invalid:We,invalidText:Ve,labelText:"Email Address*",placeholder:"Email address",size:"lg",value:R,onChange:function(e){e.target.value.match(/^[a-zA-Z0-9+_.-]+@[a-zA-Z0-9.-]+$/)?(Me(!1),qe(!1)):(Me(!0),ze("Valid Email format required"),qe(!0)),g(e.target.value)}})}),Object(N.jsx)("div",{className:"ButtonArea",children:Object(N.jsx)(d.a,{type:"submit",disabled:Ye,children:" Invite "})})]})]})},A=i(62);var f=function(){return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(A.Header,{"aria-label":"IBM",children:Object(N.jsx)(A.HeaderName,{prefix:"",href:"#",children:Object(N.jsx)("div",{Style:"white-space: nowrap;",children:"SaaS User Subscription and Management Sample Application"})})}),Object(N.jsx)("div",{className:"App",children:Object(N.jsxs)("div",{className:"AppContent",children:[Object(N.jsx)("br",{}),Object(N.jsx)("br",{}),Object(N.jsx)("br",{}),Object(N.jsx)("br",{}),Object(N.jsx)("h2",{children:"Subscription for OrgAccess "}),Object(N.jsx)(D,{})]})})]})};i(126),i(127);c.a.render(Object(N.jsx)(f,{}),document.getElementById("root"))},80:function(e,t,i){}},[[128,1,2]]]);
//# sourceMappingURL=main.328558b8.chunk.js.map